(this["webpackJsonpgroup-chat"]=this["webpackJsonpgroup-chat"]||[]).push([[0],{38:function(e,t,c){},39:function(e,t,c){},48:function(e,t,c){},53:function(e,t,c){},55:function(e,t,c){"use strict";c.r(t);var n=c(2),r=c.n(n),s=c(24),a=c.n(s),i=(c(38),c(14)),o=c(10),d=(c(39),c(21));d.a.initializeApp({apiKey:"AIzaSyDqnkulSxKSky5Gsdzdo3ZBtX3mTYqfvxs",authDomain:"group-chat-b978c.firebaseapp.com",projectId:"group-chat-b978c",storageBucket:"group-chat-b978c.appspot.com",messagingSenderId:"94345118295",appId:"1:94345118295:web:e31b871b0c4da0af2d1912"});var u=d.a.auth(),l=new d.a.auth.GoogleAuthProvider,j=d.a,h=c(22),b=r.a.createContext(),p={Group:"",user:""},m=function(e,t){switch(t.type){case"set":return Object(h.a)(Object(h.a)({},e),{},{Group:t.name});case"user":return Object(h.a)(Object(h.a)({},e),{},{user:t.user})}},O=c(32),x=c(3),f=r.a.memo((function(e){var t=Object(n.useState)(""),c=Object(i.a)(t,2),r=c[0],s=c[1],a=Object(n.useState)([]),d=Object(i.a)(a,2),u=d[0],l=d[1],h=j.firestore(),p=Object(n.useContext)(b),m=Object(o.f)(),f=e.uid,v=e.photoURL,g=p.user,y=Object(n.useRef)(),N=new URL(window.location.href).searchParams.get("g"),S=function(e){h.collection("".concat(e)).orderBy("createdAt","desc").limit(50).onSnapshot((function(e){l(e.docs.reverse().map((function(e){return e.data()})))}))};Object(n.useEffect)((function(){var e=new URL(window.location.href).searchParams.get("g");S(e)}),[]),Object(n.useEffect)((function(){y.current.scrollIntoView({behavior:"smooth"})}));var C=Object(O.a)({timeout:6e4,onIdle:function(e){h.collection("".concat(N)).doc().set({text:"".concat(g," is idle"),createdAt:j.firestore.FieldValue.serverTimestamp(),uid:f,photoURL:v,userName:g,type:"entry"})},onActive:function(e){h.collection("".concat(N)).doc().set({text:"".concat(g," is active"),createdAt:j.firestore.FieldValue.serverTimestamp(),uid:f,photoURL:v,userName:g,type:"entry"})},onAction:function(e){},debounce:500});C.getRemainingTime,C.getLastActiveTime;return Object(x.jsx)("div",{children:Object(x.jsx)("section",{children:Object(x.jsx)("div",{children:Object(x.jsxs)("div",{children:[Object(x.jsxs)("div",{className:"chat-header",children:[Object(x.jsx)("h2",{className:"chat-title",children:"Messages"}),Object(x.jsx)("div",{className:"chat-close",onClick:function(){h.collection("".concat(N)).doc().set({text:"".concat(g," leave the chat"),createdAt:j.firestore.FieldValue.serverTimestamp(),uid:f,photoURL:v,userName:g,type:"entry"}).then((function(){m.push("/")}))},children:"\u292b"})]}),Object(x.jsxs)("div",{className:"chat-container",children:[null===u||void 0===u?void 0:u.map((function(e){return(null===e||void 0===e?void 0:e.uid)==f&&"message"==(null===e||void 0===e?void 0:e.type)?Object(x.jsxs)("div",{className:"sender",children:[Object(x.jsxs)("div",{className:"chat-profile-right",children:[Object(x.jsx)("h3",{className:"chat-profile-userName",children:"You"}),Object(x.jsx)("img",{src:e.photoURL,className:"chat-profile-image-right"})]}),Object(x.jsx)("p",{children:null===e||void 0===e?void 0:e.text})]},null===e||void 0===e?void 0:e.createdAt):"entry"==(null===e||void 0===e?void 0:e.type)?Object(x.jsx)("div",{className:"chat-user-entry",children:Object(x.jsx)("p",{children:e.text})},null===e||void 0===e?void 0:e.createdAt):"message"==(null===e||void 0===e?void 0:e.type)?Object(x.jsxs)("div",{className:"receiver",children:[Object(x.jsxs)("div",{className:"chat-profile-left",children:[Object(x.jsx)("img",{src:e.photoURL,className:"chat-profile-image-left"}),Object(x.jsx)("h3",{className:"chat-profile-userName",children:e.userName})]}),Object(x.jsx)("p",{children:e.text})]},null===e||void 0===e?void 0:e.createdAt):void 0})),Object(x.jsx)("div",{ref:y})]}),Object(x.jsx)("div",{className:"chat-send",children:Object(x.jsxs)("form",{onSubmit:function(e){e.preventDefault(),h.collection("".concat(N)).doc().set({text:r,createdAt:j.firestore.FieldValue.serverTimestamp(),uid:f,photoURL:v,userName:g,type:"message"}),s(""),S(N)},children:[Object(x.jsx)("input",{placeholder:"Message...",value:r,onChange:function(e){s(e.target.value),y.current.scrollIntoView()}}),Object(x.jsx)("button",{disabled:!r,type:"submit",children:"Send"})]})})]})})})})})),v=c(19),g=(c(48),c(26)),y=c.n(g),N=function(){var e=j.firestore(),t=Object(o.f)(),c=Object(n.useState)(""),r=Object(i.a)(c,2),s=r[0],a=r[1],d=Object(n.useState)(""),l=Object(i.a)(d,2),h=l[0],p=l[1],m=Object(n.useContext)(b),O=m.user,f=m.method,g=u.currentUser,N=g.uid,S=g.photoURL;return Object(x.jsx)("div",{children:Object(x.jsx)("section",{children:Object(x.jsxs)("div",{className:"create-container",children:[Object(x.jsx)("div",{className:"create-home",children:Object(x.jsx)(v.b,{to:"/",className:"create-home-btn",children:Object(x.jsx)(y.a,{})})}),Object(x.jsx)("h2",{children:"Make a Group Chat"}),Object(x.jsxs)("form",{onSubmit:function(c){c.preventDefault(),f({type:"set",name:s}),e.collection("".concat(s)).doc().set({text:"".concat(O," Joined the Chat"),createdAt:j.firestore.FieldValue.serverTimestamp(),uid:N,photoURL:S,userName:O,type:"entry"}).then((function(){e.collection("".concat(s)).doc("password").set({text:h,createdAt:j.firestore.FieldValue.serverTimestamp(),uid:N,photoURL:S,userName:O,type:"password"}),t.push({pathname:"/2XyllSDfepoe142197f5273865770be44723c2a5df",search:"?g="+s})})).catch((function(e){}))},children:[Object(x.jsx)("br",{}),Object(x.jsx)("input",{type:"text",placeholder:"Create a Room",required:!0,name:"roomName",value:s,onChange:function(e){return a(e.target.value)}}),Object(x.jsx)("br",{}),Object(x.jsx)("input",{type:"password",placeholder:"Password",required:!0,name:"password",onChange:function(e){return p(e.target.value)}}),Object(x.jsx)("br",{}),Object(x.jsx)("button",{type:"submit",disabled:"",children:"Create"})]}),Object(x.jsx)("small",{className:"note",children:"Note: Create a Room & Share Your Room name to your friends."})]})})})},S=(c(53),function(e){var t=e.user,c=Object(n.useContext)(b).method,s=Object(o.f)(),a=Object(x.jsx)("div",{children:Object(x.jsx)("section",{children:Object(x.jsxs)("div",{className:"home-container",children:[Object(x.jsx)("div",{className:"home-title",children:Object(x.jsx)("h2",{children:"Group Chat"})}),t?Object(x.jsxs)(r.a.Fragment,{children:[Object(x.jsx)("div",{children:Object(x.jsx)("button",{onClick:function(){return s.push("/create")},children:"Create Group"})}),Object(x.jsx)("div",{children:Object(x.jsx)("button",{onClick:function(){return s.push("/join")},children:"Join Group"})}),Object(x.jsx)("div",{children:Object(x.jsx)("button",{onClick:function(){u.signOut()},children:"Sign Out"})})]}):Object(x.jsx)("div",{children:Object(x.jsx)("button",{onClick:function(){u.signInWithPopup(l).then((function(e){var t=e.user.displayName;c({type:"user",user:t})}))},children:"Sign In with Google"})})]})})});return Object(x.jsx)("div",{children:a})}),C=function(){var e=j.firestore(),t=Object(o.f)(),c=Object(n.useContext)(b),r=c.method,s=c.user,a=Object(n.useState)(""),d=Object(i.a)(a,2),l=d[0],h=d[1],p=u.currentUser,m=p.uid,O=p.photoURL;return Object(x.jsx)("div",{children:Object(x.jsx)("section",{children:Object(x.jsxs)("div",{className:"create-container",children:[Object(x.jsx)("div",{className:"create-home",children:Object(x.jsx)(v.b,{to:"/",className:"create-home-btn",children:Object(x.jsx)(y.a,{})})}),Object(x.jsx)("h2",{children:"Join Group Chat"}),Object(x.jsxs)("form",{onSubmit:function(c){c.preventDefault(),r({type:"set",name:l}),e.collection("".concat(l)).doc().set({text:"".concat(s," joined the chat"),createdAt:j.firestore.FieldValue.serverTimestamp(),uid:m,photoURL:O,userName:s,type:"entry"}).then((function(){t.push({pathname:"/2XyllSDfepoe142197f5273865770be44723c2a5df",search:"?g="+l})})).catch((function(e){}))},children:[Object(x.jsx)("br",{}),Object(x.jsx)("input",{type:"text",placeholder:"Enter Group Name",required:!0,name:"roomName",onChange:function(e){return h(e.target.value)}}),Object(x.jsx)("br",{}),Object(x.jsx)("input",{type:"text",placeholder:"Enter Your Name",required:!0,value:s,readOnly:!0}),Object(x.jsx)("br",{}),Object(x.jsx)("button",{type:"submit",disabled:"",children:"Join"})]}),Object(x.jsx)("small",{className:"note",children:"Note: Create a Room & Share a url link to your friends."})]})})})};var R=function(){var e=Object(n.useReducer)(m,p),t=Object(i.a)(e,2),c=t[0],r=t[1],s=c.Group,a=c.user,d=Object(n.useState)(""),l=Object(i.a)(d,2),j=l[0],h=l[1],O=Object(n.useState)(""),g=Object(i.a)(O,2),y=g[0],R=g[1];return Object(n.useEffect)((function(){var e=u.onAuthStateChanged((function(t){return t?(h(t.uid),R(t.photoURL),r({type:"user",user:t.displayName})):r({type:"user",user:null}),function(){e()}}))}),[]),Object(x.jsx)(v.a,{children:Object(x.jsx)(b.Provider,{value:{name:s,method:r,user:a},children:Object(x.jsx)("div",{className:"App",children:Object(x.jsxs)(o.c,{children:[Object(x.jsx)(o.a,{path:"/create",children:Object(x.jsx)(N,{})}),Object(x.jsx)(o.a,{path:"/join",children:Object(x.jsx)(C,{})}),Object(x.jsx)(o.a,{path:"/2XyllSDfepoe142197f5273865770be44723c2a5df",children:Object(x.jsx)(f,{uid:j,photoURL:y,Gname:s})}),Object(x.jsx)(o.a,{path:"/",children:Object(x.jsx)(S,{user:a})})]})})})})};a.a.render(Object(x.jsx)(r.a.StrictMode,{children:Object(x.jsx)(R,{})}),document.getElementById("root"))}},[[55,1,2]]]);
//# sourceMappingURL=main.660091e4.chunk.js.map